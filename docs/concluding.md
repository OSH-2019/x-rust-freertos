# Rust-FreeRTOS结题报告

我们的项目是利用新兴的Rust语言改写FreeRTOS操作系统。

改写不是抄写。在项目开展的过程中，我们按照FreeRTOS的程序逻辑，针对Rust语言的特点做出了很多富有创造力的设计，我们将在以下部分进行介绍。

最终，我们成功实现了开题时提出的目标，完成了对FreeRTOS中所有的内核模块——**移植（`port`）**模块、**链表**（`list`）模块、**任务调度**（`task`）模块和**队列与信号量**（`queue`）模块——的改写；为了更好地发挥多人协作的作用，我们将以上模块进一步细分，形成了十余个轻量的子模块；截至我们开始撰写结题报告时，我们的总代码量（不包括底层的C语言代码）已经达到了**6000行以上**，git仓库的commits数量**200多次**，小组的每个成员都贡献了大量的代码；此外，我们希望这个项目更加专业，并且能够真正被他人使用，所以我们提供了详细的[文档]()和各个功能的[示例代码]()。

在本报告中，我们首先将对Rust-FreeRTOS项目进行简要介绍，然后重点介绍我们的项目设计，最终介绍我们的测试结果。

我们的小组成员：**樊金昊 左顺 宁雨亭 黄业琦 张俸铭 雷思琦**

## 项目背景

TODO：简要总结开题报告和可行性报告

## 项目设计

### 总体设计概览

TODO：樊金昊来写，大家补充

### 硬件接口——Port模块

TODO：樊金昊写

### 基本数据结构——链表

TODO：左顺写

### TCB和TaskHandle结构体

TODO：樊金昊写

### 任务控制函数

TODO：挂起、恢复、delay等，黄业琦写（这一部分代码似乎还有编译问题）

### 任务API函数

TODO：张俸铭写，这一部分代码还有编译错误

### 队列与信号量

TODO：宁雨亭和雷神写，可以多写点。

## 测试

TODO：现在task和queue的基本功能已经测试过，主要还需测试以下内容：

* 任务挂起恢复
* 任务API里改变任务优先级的那个函数
* semaphore和mutex

负责这几部分的同学这两天可以写一些测试代码测试一下，就像`src/lib.rs`里的测试一样，具体测试可以模仿[freertos.rs](https://github.com/hashmismatch/freertos.rs/tree/master/qemu_stm32_tests/examples)里的。

如果这几部分测试都比较顺利，我们回头用一些benchmark测一下性能，与C语言的实现对比一下。

## 总结与不足

TODO：最后再写